{"ast":null,"code":"import _regeneratorRuntime from\"/home/parshwa/Downloads/project/Money-tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/parshwa/Downloads/project/Money-tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/parshwa/Downloads/project/Money-tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useAuth}from'./context/AuthContext';import{incomeCategories,expenseCategories,resetCategories}from'./constants/categories';var useTransactions=function useTransactions(title){resetCategories();var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:5000/api/gettransaction',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:currentUser.email})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setTransactions(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(\"error\",_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();var rightTransactions=transactions.filter(function(t){return t.type===title;});var total=rightTransactions.reduce(function(acc,curr){return acc+curr.amount;},0);var categories=title==='Income'?incomeCategories:expenseCategories;rightTransactions.forEach(function(t){var category=categories.find(function(c){return c.type===t.category;});if(category)category.amount+=t.amount;});var filteredCategories=categories.filter(function(sc){return sc.amount>0;});var chartData={datasets:[{data:filteredCategories.map(function(c){return c.amount;}),backgroundColor:filteredCategories.map(function(c){return c.color;})}],labels:filteredCategories.map(function(c){return c.type;})};return{filteredCategories:filteredCategories,total:total,chartData:chartData};};export default useTransactions;","map":{"version":3,"names":["useState","useAuth","incomeCategories","expenseCategories","resetCategories","useTransactions","title","_useAuth","currentUser","_useState","_useState2","_slicedToArray","transactions","setTransactions","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","email","sent","json","t0","console","log","stop","apply","arguments","rightTransactions","filter","t","type","total","reduce","acc","curr","amount","categories","forEach","category","find","c","filteredCategories","sc","chartData","datasets","map","backgroundColor","color","labels"],"sources":["/home/parshwa/Downloads/project/Money-tracker/frontend/src/useTransactions.js"],"sourcesContent":["import { useState } from 'react';\nimport { useAuth } from './context/AuthContext';\nimport { incomeCategories, expenseCategories, resetCategories } from './constants/categories';\n\nconst useTransactions = (title) => {\n  resetCategories();\n  const { currentUser } = useAuth();\n  const [transactions, setTransactions] = useState([]);\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/gettransaction', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: currentUser.email\n        })\n      });\n      const data = await response.json();\n      setTransactions(data);\n    } catch (error) {\n      console.log(\"error\", error);\n    }\n  };\n  fetchData()\n  const rightTransactions = transactions.filter((t) => t.type === title);\n  const total = rightTransactions.reduce((acc, curr) => {\n    return acc + curr.amount;\n  }, 0);\n  const categories = title === 'Income' ? incomeCategories : expenseCategories;\n\n  rightTransactions.forEach((t) => {\n    const category = categories.find((c) => c.type === t.category);\n\n    if (category) category.amount += t.amount;\n  });\n\n  const filteredCategories = categories.filter((sc) => sc.amount > 0);\n\n  const chartData = {\n    datasets: [{\n      data: filteredCategories.map((c) => c.amount),\n      backgroundColor: filteredCategories.map((c) => c.color),\n    }],\n    labels: filteredCategories.map((c) => c.type),\n  };\n\n  return { filteredCategories, total, chartData };\n};\n\nexport default useTransactions;\n"],"mappings":"obAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,gBAAgB,CAAEC,iBAAiB,CAAEC,eAAe,KAAQ,wBAAwB,CAE7F,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,KAAK,CAAK,CACjCF,eAAe,EAAE,CACjB,IAAAG,QAAA,CAAwBN,OAAO,EAAE,CAAzBO,WAAW,CAAAD,QAAA,CAAXC,WAAW,CACnB,IAAAC,SAAA,CAAwCT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpC,GAAM,CAAAI,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAAC,KAAK,CAAC,0CAA0C,CAAE,CACvEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,KAAK,CAAEzB,WAAW,CAACyB,KACrB,CAAC,CACH,CAAC,CAAC,QARIb,QAAQ,CAAAI,QAAA,CAAAU,IAAA,CAAAV,QAAA,CAAAE,IAAA,SASK,CAAAN,QAAQ,CAACe,IAAI,EAAE,QAA5Bd,IAAI,CAAAG,QAAA,CAAAU,IAAA,CACVrB,eAAe,CAACQ,IAAI,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,aAEtBa,OAAO,CAACC,GAAG,CAAC,OAAO,CAAAd,QAAA,CAAAY,EAAA,CAAQ,CAAC,yBAAAZ,QAAA,CAAAe,IAAA,MAAApB,OAAA,iBAE/B,kBAhBK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAgBd,CACD3B,SAAS,EAAE,CACX,GAAM,CAAA4B,iBAAiB,CAAG9B,YAAY,CAAC+B,MAAM,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACC,IAAI,GAAKvC,KAAK,GAAC,CACtE,GAAM,CAAAwC,KAAK,CAAGJ,iBAAiB,CAACK,MAAM,CAAC,SAACC,GAAG,CAAEC,IAAI,CAAK,CACpD,MAAO,CAAAD,GAAG,CAAGC,IAAI,CAACC,MAAM,CAC1B,CAAC,CAAE,CAAC,CAAC,CACL,GAAM,CAAAC,UAAU,CAAG7C,KAAK,GAAK,QAAQ,CAAGJ,gBAAgB,CAAGC,iBAAiB,CAE5EuC,iBAAiB,CAACU,OAAO,CAAC,SAACR,CAAC,CAAK,CAC/B,GAAM,CAAAS,QAAQ,CAAGF,UAAU,CAACG,IAAI,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACV,IAAI,GAAKD,CAAC,CAACS,QAAQ,GAAC,CAE9D,GAAIA,QAAQ,CAAEA,QAAQ,CAACH,MAAM,EAAIN,CAAC,CAACM,MAAM,CAC3C,CAAC,CAAC,CAEF,GAAM,CAAAM,kBAAkB,CAAGL,UAAU,CAACR,MAAM,CAAC,SAACc,EAAE,QAAK,CAAAA,EAAE,CAACP,MAAM,CAAG,CAAC,GAAC,CAEnE,GAAM,CAAAQ,SAAS,CAAG,CAChBC,QAAQ,CAAE,CAAC,CACTtC,IAAI,CAAEmC,kBAAkB,CAACI,GAAG,CAAC,SAACL,CAAC,QAAK,CAAAA,CAAC,CAACL,MAAM,GAAC,CAC7CW,eAAe,CAAEL,kBAAkB,CAACI,GAAG,CAAC,SAACL,CAAC,QAAK,CAAAA,CAAC,CAACO,KAAK,GACxD,CAAC,CAAC,CACFC,MAAM,CAAEP,kBAAkB,CAACI,GAAG,CAAC,SAACL,CAAC,QAAK,CAAAA,CAAC,CAACV,IAAI,GAC9C,CAAC,CAED,MAAO,CAAEW,kBAAkB,CAAlBA,kBAAkB,CAAEV,KAAK,CAALA,KAAK,CAAEY,SAAS,CAATA,SAAU,CAAC,CACjD,CAAC,CAED,cAAe,CAAArD,eAAe"},"metadata":{},"sourceType":"module"}